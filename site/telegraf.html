<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/tomorrow-night.min.css" rel="stylesheet">
	<link href="./src/css/style.css?1" rel="stylesheet">
</head>
<body>
<pre class="text"><a href="./index.html">–í–µ—Ä–Ω—É—Ç—å—Å—è</a>
<hr>

<div class="header1">–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
bot.hears('sample1', function(ctx) {
    return ctx.reply('–ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç!');
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample1.gif" width="380" height="179"></div>


<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
bot.hears('sample2', function(ctx) {
    return ctx.replyWithHTML([
        '&lt;b&gt;–ñ–∏—Ä–Ω—ã–π&lt;/b&gt;',
        '&lt;i&gt;–ö—É—Ä—Å–∏–≤&lt;/i&gt;',
        '&lt;u&gt;–ü–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π&lt;/u&gt;',
        '&lt;s&gt;–ó–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π&lt;/s&gt;',
        '&lt;a href="http://www.example.com/"&gt;URL —Å—Å—ã–ª–∫–∞&lt;/a&gt;',
        '&lt;a href="tg://user?id=123456789"&gt;–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¢–µ–ª–µ–≥—Ä–∞–º&lt;/a&gt;',
        '&lt;code&gt;inline fixed-width code&lt;/code&gt;',
        '&lt;pre&gt;pre-formatted fixed-width code block&lt;/pre&gt;'
    ].join('\n'));
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample2.gif" width="380" height="318"></div>


<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –ü—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
bot.hears('sample3', function(ctx) {
    return ctx.reply(String.fromCodePoint(4448));
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample3.gif" width="380" height="179"></div>


<div class="header1">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
bot.hears('sample4', function(ctx) {
    return ctx.reply('–û—Ç–≤–µ—Ç –Ω–∞ sample4!').then(function({ message_id }) {
    // –ò–∑–º–µ–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "–û—Ç–≤–µ—Ç –Ω–∞ sample4!"
        setTimeout(function() {
            ctx.telegram.editMessageText(
                ctx.chat.id, message_id, message_id, '–°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ!'
            );
        }, 1000 * 2);
    });
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample4.gif" width="380" height="179"></div>


<div class="header1">–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏—Å–ª–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
bot.hears('sample5', function(ctx) {
    return ctx.reply('–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "sample5" —É–¥–∞–ª–µ–Ω–æ!').then(function() {
    // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "sample5"
        ctx.deleteMessage();
    });
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample5.gif" width="380" height="179"></div>

<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏—Å–ª–∞–Ω–Ω–æ–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
bot.hears('sample6', function(ctx) {
    return ctx.reply('–û—Ç–≤–µ—Ç –Ω–∞ sample6!').then(function({ message_id }) {
    // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "sample6"
        setTimeout(function() {
            ctx.deleteMessage(ctx.message_id);
        }, 1000 * 1);
        
    // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "–û—Ç–≤–µ—Ç –Ω–∞ sample6!"
        setTimeout(function() {
            ctx.deleteMessage(message_id);
        }, 1000 * 2);
    });
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample6.gif" width="380" height="179"></div>


<div class="header1">–ü—Ä–æ—Å—Ç–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞</div>
<code class="javascript">var Telegraf = require('telegraf');
var Markup = require('telegraf/markup');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –ü—Ä–æ—Å—Ç–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
bot.hears('sample7', function(ctx) {
    return ctx.reply('–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã!', Markup
        .keyboard(['–ö–Ω–æ–ø–∫–∞ #1', '–ö–Ω–æ–ø–∫–∞ #2'])
        .extra()
    );
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample7.gif" width="380" height="375"></div>


<code class="javascript">var Telegraf = require('telegraf');
var Markup = require('telegraf/markup');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
bot.hears('sample8', function(ctx) {
    return ctx.reply('–ü—Ä–∏–º–µ—Ä –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã!', Markup
        .keyboard([['–ö–Ω–æ–ø–∫–∞ #1', '–ö–Ω–æ–ø–∫–∞ #2']])
        .extra()
    );
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample8.gif" width="380" height="375"></div>


<code class="javascript">var Telegraf = require('telegraf');
var Markup = require('telegraf/markup');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –°–∂–∞—Ç–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
bot.hears('sample9', function(ctx) {
    return ctx.reply('–ü—Ä–∏–º–µ—Ä —Å–∂–∞—Ç–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã!', Markup
        .keyboard(['–ö–Ω–æ–ø–∫–∞ #1', '–ö–Ω–æ–ø–∫–∞ #2'])
        
    // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—Å—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω(–Ω–∞ –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é –æ–±–ª–∞—Å—Ç—å)
    // –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å ".resize()", —Ç–æ –∫–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç —Å–∂–∞—Ç—ã –¥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
        .resize()// –°–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫–∏
        .extra()
    );
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample9.gif" width="380" height="277"></div>


<code class="javascript">var Telegraf = require('telegraf');
var Markup = require('telegraf/markup');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –°–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞
bot.hears('sample10', function(ctx) {
    return ctx.reply('–°–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞!', Markup
        .keyboard(['–ö–Ω–æ–ø–∫–∞ #1', '–ö–Ω–æ–ø–∫–∞ #2'])
        .oneTime()// –°–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞
        .extra()
    );
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample10.gif" width="380" height="375"></div>


<code class="javascript">var Telegraf = require('telegraf');
var Markup = require('telegraf/markup');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä—è–¥–∞–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
bot.hears('sample11', function(ctx) {
    return ctx.reply('–ü—Ä–∏–º–µ—Ä –∫–∞–∫ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä—è–¥–∞–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã!', Markup
        .keyboard([
        // –†—è–¥ 1
            ['–ö–Ω–æ–ø–∫–∞ #1', '–ö–Ω–æ–ø–∫–∞ #2', '–ö–Ω–æ–ø–∫–∞ #3'],
            
        // –†—è–¥ 2
            ['–ö–Ω–æ–ø–∫–∞ #4'],
            
        // –†—è–¥ 3
            ['–ö–Ω–æ–ø–∫–∞ #5', '–ö–Ω–æ–ø–∫–∞ #6', '–ö–Ω–æ–ø–∫–∞ #7', '–ö–Ω–æ–ø–∫–∞ #8']
        ])
        .extra()
    );
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample11.gif" width="380" height="393"></div>


<div class="header1">–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞</div>
<code class="javascript">var Telegraf = require('telegraf');
var Extra = require('telegraf/extra');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –ü—Ä–æ—Å—Ç–∞—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
bot.hears('sample12', function(ctx) {
    return ctx.reply('–ü—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã!', Extra.markup(function(m) {
        return m.inlineKeyboard([
            m.callbackButton('–ö–Ω–æ–ø–∫–∞ #1', 'butt_1'),
            m.callbackButton('–ö–Ω–æ–ø–∫–∞ #2', 'butt_2'),
            m.callbackButton('–ö–Ω–æ–ø–∫–∞ #3', 'butt_3')
        ]);
    }));
});

// –°–ª—É—à–∞—Ç–µ–ª—å "–ö–Ω–æ–ø–∫–∞ #1"
bot.action('butt_1', function(ctx) {
    console.log('–ö–ª–∏–∫ –ø–æ "–ö–Ω–æ–ø–∫–∞ #1"!');
    ctx.answerCbQuery();
});

// –°–ª—É—à–∞—Ç–µ–ª—å "–ö–Ω–æ–ø–∫–∞ #2"
bot.action('butt_2', function(ctx) {
    console.log('–ö–ª–∏–∫ –ø–æ "–ö–Ω–æ–ø–∫–∞ #2"!');
    ctx.answerCbQuery();
});

// –°–ª—É—à–∞—Ç–µ–ª—å "–ö–Ω–æ–ø–∫–∞ #3"
bot.action('butt_3', function(ctx) {
    console.log('–ö–ª–∏–∫ –ø–æ "–ö–Ω–æ–ø–∫–∞ #3"!');
    ctx.answerCbQuery();
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample12.gif" width="380" height="220"></div>


<div class="header1">–í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
<code class="javascript">var Telegraf = require('telegraf');
var Extra = require('telegraf/extra');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
bot.hears('sample13', function(ctx) {
    return ctx.reply('–ù–∞–∂–º–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.', Extra.markup(function(m) {
        return m.inlineKeyboard([
            m.callbackButton('–ü–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ', 'butt_1')
        ]);
    }));
});

bot.action('butt_1', function(ctx) {
    return ctx.answerCbQuery('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!');
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample13.gif" width="424" height="425"></div>


<code class="javascript">var Telegraf = require('telegraf');
var Extra = require('telegraf/extra');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
bot.hears('sample14', function(ctx) {
    return ctx.reply('–ù–∞–∂–º–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.', Extra.markup(function(m) {
        return m.inlineKeyboard([
            m.callbackButton('–ü–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ', 'butt_1')
        ]);
    }));
});

bot.action('butt_1', function(ctx) {
    var msg = '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º!\n–ù–∞–∂–º–∏—Ç–µ –û–ö —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å —ç—Ç–æ –æ–∫–Ω–æ.';
    return ctx.answerCbQuery(msg, true);
});

bot.launch();
</code>
<div class="center"><img class="border1" src="./src/img/sample14.gif" width="424" height="425"></div>


<div class="header1">–í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É</div>
<div class="center"><img class="border1" src="./src/img/code1.png" width="702" height="246"></div>


<div class="header1">–°–ª—É—à–∞—Ç–µ–ª–∏</div>
<code class="javascript">var Telegraf = require('telegraf');
var bot = new Telegraf(process.env.BOT_TOKEN);

// –°–ª—É—à–∞—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥—ã "/start"
bot.start(function(ctx) {
    ctx.reply('–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É "/start"!');
});

// –°–ª—É—à–∞—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥—ã "/help"
bot.help(function(ctx) {
    ctx.reply('–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É "/help"!');
});

// –°–ª—É—à–∞—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥—ã "/settings"
bot.settings(function(ctx) {
    ctx.reply('–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É "/settings"!');
});

// –°–ª—É—à–∞—Ç–µ–ª—å –∫–æ–º–∞–Ω–¥—ã "/test"
bot.command('test', function(ctx) {
    ctx.reply('–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É "/test"!');
});

// –°–ª—É—à–∞—Ç–µ–ª—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
bot.on('text', function(ctx, next) {
    if (ctx.message.text[0] !== '/') {
        return next();
    }
    
    ctx.reply(`–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É "${ctx.match[0]}"!`);
});

// –°–ª—É—à–∞—Ç–µ–ª—å —Å—Ç—Ä–æ–∫–∏ "test"
bot.hears('test', function(ctx) {
    ctx.reply('–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å—Ç—Ä–æ–∫—É "test"!');
});

// –°–ª—É—à–∞—Ç–µ–ª—å –ª—é–±–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
bot.on('text', function(ctx) {
    ctx.reply('–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ç–µ–∫—Å—Ç "'+ ctx.update.message.text +'"!');
});

// –°–ª—É—à–∞—Ç–µ–ª—å –ª—é–±–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞
bot.on('sticker', function(ctx) {
    ctx.replyWithHTML(
        '<code>'+ JSON.stringify(ctx.update.message.sticker, null, '    ') +'</code>'
    );
});

bot.launch();
</code>

<div class="header1">–ü—Ä–æ—á–µ–µ</div>
<code class="javascript">const Telegraf = require('telegraf');
const Extra = require('telegraf/extra');
const Markup = require('telegraf/markup');
const bot = new Telegraf(process.env.BOT_TOKEN);

// –í—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å
//bot.use(Telegraf.log());

bot.command('onetime', ({ reply }) =>
  reply('One time keyboard', Markup
    .keyboard(['/simple', '/inline', '/pyramid'])
    .oneTime()
    .resize()
    .extra()
  )
)

bot.command('custom', ({ reply }) => {
  return reply('Custom buttons keyboard', Markup
    .keyboard([
      ['üîç Search', 'üòé Popular'], // Row1 with 2 buttons
      ['‚ò∏ Setting', 'üìû Feedback'], // Row2 with 2 buttons
      ['üì¢ Ads', '‚≠êÔ∏è Rate us', 'üë• Share'] // Row3 with 3 buttons
    ])
    .oneTime()
    .resize()
    .extra()
  )
})

bot.hears('üîç Search', ctx => ctx.reply('Yay!'))
bot.hears('üì¢ Ads', ctx => ctx.reply('Free hugs. Call now!'))

bot.command('special', (ctx) => {
  return ctx.reply('Special buttons keyboard', Extra.markup((markup) => {
    return markup.resize()
      .keyboard([
        markup.contactRequestButton('Send contact'),
        markup.locationRequestButton('Send location')
      ])
  }))
})

bot.command('pyramid', (ctx) => {
  return ctx.reply('Keyboard wrap', Extra.markup(
    Markup.keyboard(['one', 'two', 'three', 'four', 'five', 'six'], {
      wrap: (btn, index, currentRow) => currentRow.length >= (index + 1) / 2
    })
  ))
})

bot.command('simple', (ctx) => {
  return ctx.replyWithHTML('<b>Coke</b> or <i>Pepsi?</i>', Extra.markup(
    Markup.keyboard(['Coke', 'Pepsi'])
  ))
})

bot.command('inline', (ctx) => {
  return ctx.reply('<b>Coke</b> or <i>Pepsi?</i>', Extra.HTML().markup((m) =>
    m.inlineKeyboard([
      m.callbackButton('Coke0', '666'),
      m.callbackButton('Pepsi0', 'Pepsi1')
    ])))
})

bot.command('random', (ctx) => {
  return ctx.reply('random example',
    Markup.inlineKeyboard([
      Markup.callbackButton('Coke', 'Coke'),
      Markup.callbackButton('Dr Pepper', 'Dr Pepper', Math.random() > 0.5),
      Markup.callbackButton('Pepsi', 'Pepsi')
    ]).extra()
  )
})

bot.command('caption', (ctx) => {
  return ctx.replyWithPhoto({ url: 'https://picsum.photos/200/300/?random' },
    Extra.load({ caption: 'Caption' })
      .markdown()
      .markup((m) =>
        m.inlineKeyboard([
          m.callbackButton('Plain', 'plain'),
          m.callbackButton('Italic', 'italic')
        ])
      )
  )
})

bot.hears(/\/wrap (\d+)/, (ctx) => {
  return ctx.reply('Keyboard wrap', Extra.markup(
    Markup.keyboard(['one', 'two', 'three', 'four', 'five', 'six'], {
      columns: parseInt(ctx.match[1])
    })
  ))
})

bot.action('Dr Pepper', (ctx, next) => {
  return ctx.reply('üëç').then(() => next())
})
/*
bot.action('plain', async (ctx) => {
  await ctx.answerCbQuery()
  await ctx.editMessageCaption('Caption', Markup.inlineKeyboard([
    Markup.callbackButton('Plain', 'plain'),
    Markup.callbackButton('Italic', 'italic')
  ]))
})
*/
bot.action('italic', async (ctx) => {
  await ctx.answerCbQuery()
  await ctx.editMessageCaption('_Caption_', Extra.markdown().markup(Markup.inlineKeyboard([
    Markup.callbackButton('Plain', 'plain'),
    Markup.callbackButton('* Italic *', 'italic')
  ])))
})

bot.action('666', (ctx) => {
  return ctx.answerCbQuery('6667!')
})

bot.action(/.+/, (ctx) => {
  return ctx.answerCbQuery(`Oh, ${ctx.match[0]}! Great choice555`)
})

bot.launch();
</code>

<div class="header1">–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã</div>
<code class="javascript">//--------------------------------------------------------------------------------------------------

var Extra = require('telegraf/extra');

/*--------------------------------------------------------------------------------------------------
|
| -> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
|
|-------------------------------------------------------------------------------------------------*/

$.Telegram = function(ctx, user_id) {
    Object.defineProperty(this, '_user_id', {value: user_id});
    Object.defineProperty(this, '_ctx', {value: ctx});
};

//--------------------------------------------------------------------------------------------------

$.Telegram.prototype = {
    
/*--------------------------------------------------------------------------------------------------
|
| -> –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
|
|-------------------------------------------------------------------------------------------------*/

    intervalQuery: 1000,// –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 1 —Å–µ–∫—É–Ω–¥—É.
    nextTimeQuery: 0,// –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    count: 0,// –ö–æ–ª–∏–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏
    
/*--------------------------------------------------------------------------------------------------
|
| -> –û—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤
|
|-------------------------------------------------------------------------------------------------*/
    
// –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
    delay: function(ms) {
        return new Promise(function(resolve) {
            setTimeout(resolve, ms);
        });
    },
    
// –î–æ–±–∞–≤–ª—è–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å
    _next: function(args) {
    // –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
        var timeNow = new Date()-0;
        
    // –í—ã—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å
        var interval = this.nextTimeQuery - timeNow;
        
    // –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ –±–æ–ª—å—à–µ —Å–µ–∫—É–Ω–¥—ã —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    // —Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ–º –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
        interval = interval < 0 ? 0 : interval;
        
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
        this.nextTimeQuery = this.intervalQuery + timeNow + interval;
        
    // –°—Ç–∞–≤–∏–º –∑–∞–ø—Ä–æ—Å –≤ –æ—á–µ—Ä–µ–¥—å
        return this.delay(interval).then(() => {
            return this['_'+args.callee.name].apply(this, args);
        });
    },
    
/*--------------------------------------------------------------------------------------------------
|
| -> –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã
|
|-------------------------------------------------------------------------------------------------*/

    isText: function(text) {
    // –¢–µ–∫—Å—Ç –Ω–µ –∑–∞–¥–∞–Ω
        if (typeof text != 'string' || text == '') {
        // –ó–∞–¥–∞–µ–º —Ç–µ–∫—Å—Ç –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            text = this.text;
        }
        
    // –û–±—Ä–µ–∑–∞–µ—Ç —Ç–µ–∫—Å—Ç –¥–æ 4096 —Å–∏–º–≤–æ–ª–æ–≤
    // –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫ –∫–∞–∫ Telegram –Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏–≤—ã—à–∞—é—â–∏–µ 4096 —Å–∏–º–≤–æ–ª–æ–≤
        text = text.substring(0, 4096);// –ü–µ—Ä–≤—ã–µ 4096 —Å–∏–º–≤–æ–ª–æ–≤
        //text = text.substring(text.length - 4096, text.length);// –ü–æ—Å–ª–µ–¥–Ω–∏–µ 4096 —Å–∏–º–≤–æ–ª–æ–≤
        
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        return text;
    },
    
/*--------------------------------------------------------------------------------------------------
|
| -> –°–≤–æ–π—Å—Ç–≤–∞
|
|-------------------------------------------------------------------------------------------------*/

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    get text() {
        return this._ctx.message['text'];
    },
    
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
    get match() {
        return this._ctx.match;
    },
    
/*--------------------------------------------------------------------------------------------------
|
| -> –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—à–µ–¥—à–∏–π –æ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
|
|-------------------------------------------------------------------------------------------------*/

// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –±–µ–∑ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
// —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ,
// —Ç–æ –µ—Å—Ç—å –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
    complete: function() {return this._next(arguments)}, _complete: function() {
        return this._ctx.answerCbQuery();
    },
    
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    notification: function() {return this._next(arguments)}, _notification: function(text) {
        return this._ctx.answerCbQuery(this.isText(text), false);
    },
    
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
    alert: function() {return this._next(arguments)}, _alert: function(text) {
        return this._ctx.answerCbQuery(this.isText(text), true);
    },
    
/*--------------------------------------------------------------------------------------------------
|
| -> –†–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
|
|-------------------------------------------------------------------------------------------------*/
    
// –£–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
    _remove: function() {return this._next(arguments)}, remove: function(message_id) {
        return this._ctx.deleteMessage(message_id);
    },
    
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
    send: function() {return this._next(arguments)}, _send: function(text, keyboard) {
    // –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        if (keyboard) {
            return this._ctx.reply(this.isText(text), Extra.markup(function(m) {
                var buttons = [];
                for (var i = 0; i < keyboard.length; i++) {
                    buttons.push(m.callbackButton(keyboard[i][0], keyboard[i][1]));
                }
                return m.inlineKeyboard(buttons);
            }));
        }
        
    // –°–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        return this._ctx.reply(this.isText(text));
    },
    
// –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
    edit: function() {return this._next(arguments)}, edit: function(message_id, text, keyboard) {
    // –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        if (keyboard) {
            return this._ctx.telegram.editMessageText( 
            // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                this._user_id,
                
            // ID —Å–æ–æ–±—â–µ–Ω–∏—è
                message_id,
                
            // ID –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
                0,
                
            // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
                this.isText(text),
                
            // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
                Extra.markup(function(m) {
                    var buttons = [];
                    for (var i = 0; i < keyboard.length; i++) {
                        buttons.push(m.callbackButton(keyboard[i][0], keyboard[i][1]));
                    }
                    return m.inlineKeyboard(buttons);
                })
            );
        }
        
    // –°–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        return this._ctx.telegram.editMessageText(
            this._user_id,// ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            message_id,// ID —Å–æ–æ–±—â–µ–Ω–∏—è
            0,// ID –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            this.isText(text)// –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        );
    }
};

//--------------------------------------------------------------------------------------------------
</code>

<div class="header1">–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã ‚Ññ2</div>
<code class="javascript">var full = new Date();
var getTime = function() {
    console.log(new Date() - full);
};

const QUERY_INTERVAL = 1000;// –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 1 —Å–µ–∫—É–Ω–¥—É.
const sleep = function(ms, val) {
    return new Promise(r => setTimeout(() => r(val), ms));
};
const noop = function(v) {
    return v;
};
const queuePromise = () => {
    let promise = Promise.resolve();
    return async cb => {
        const _promise = promise;
        return promise = Promise.resolve((async () => {
            await _promise.then(noop, noop);
            return cb();
        })())
    }
}
const proxyAllMethod = function(obj, interval) {
    const qp = queuePromise();
    return new Proxy(obj, {
        get(tar, prop) {
            if (typeof tar[prop] !== 'function') {
                return tar[prop];
            }
          
            return async (...args) => qp(async () => {
                await sleep(interval);
                return tar[prop](...args);
            });
        }
    });
};

class F {
    constructor() {
        return proxyAllMethod(this, QUERY_INTERVAL);
    }
    
    send(...args) {
        getTime();
        console.log(args);
        console.log('----------');
        return;
    }
    
    edit(...args) {
        getTime();
        console.log(args);
        console.log('----------');
        return;
    }
    
    remove(...args) {
        getTime();
        console.log(args);
        console.log('----------');
        return;
    }
    
    notification(...args) {
        getTime();
        console.log(args);
        console.log('----------');
        return;
    }
}

var f = new F();

setTimeout(function() {
    /*
    (async() => {
        f.send('Hi');
    })();
    */
    f.send(1)
    .then(function() {
        f.edit(2);
    })
    .then(function() {
        f.remove(3);
    })
    .then(function() {
        f.notification(4);
    });
}, 2000);
</code>


</pre>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad('javascript');</script>
</body>
</html>
